{
    "$id": "http://example.com/location_dps_ble_response",
    "$schema": "http://json-schema.org/draft-07/schema",
    "type": "object",
    "required": [
        "msgId",
        "payload"
    ],
    "examples": [
        {
            "msgId": "pos_2",
            "payload": {
                "ipui": "02ea651bab",
                "sip_id": "4020",
                "dm_id": "dm1",
                "dm_handover": "no",
                "dps": {
                    "bs_mac":"7c2f80c1f40a",
                    "bs_fpn" :"ab",
                    "bs_rpn":"02",
                    "bs_name":"LocalBS",
                    "timestamp":"1583953032",
                    "bases": [
                        {"fpn":"ab","rpn":"02","rssi":"60"},
                        {"fpn":"ab","rpn":"03","rssi":"54"},
                        {"fpn":"ab","rpn":"05","rssi":"50"},
                        {"fpn":"ab","rpn":"08","rssi":"49"}
                    ]
                },
                "ble": {
                    "status": "183",
                    "info":"BLE request in progress"
                } 
            }
        }
    ],
    "properties": {
        "msgId": { "$ref" : "file:json_ref/msgid.json"
        },
        "payload": {
            "$id": "#/properties/payload",
            "type": "object",
            "description": "Contains response message data",
            "required": [
                "ipui",
                "sip_id",
                "dm_id",
                "dm_handover",
                "dps",
                "ble"
            ],
            "properties": {
                "ipui": { "$ref" : "file:json_ref/ipui.json" },
                "sip_id": { "$ref" : "file:json_ref/sip_id.json" },
                "dm_id": { "$ref" : "file:json_ref/dm_id.json" },
                "dm_handover": {"$ref" : "file:json_ref/dm_handover.json"},
                "dps": {
                    "$id": "#/properties/payload/properties/dps",
                    "type": "object",
                    "description": "DPS content response message",
                    "required": [
                        "bs_mac",
                        "bs_fpn",
                        "bs_rpn",
                        "bs_name",
                        "timestamp",
                        "bases"
                    ],
                    "properties": {
                        "bs_mac": { "$ref" : "file:json_ref/mac.json" },
                        "bs_fpn": { "$ref" : "file:json_ref/fpn.json" },
                        "bs_rpn": { "$ref" : "file:json_ref/rpn.json" },
                        "bs_name": { "$ref" : "file:json_ref/bs_name.json" },
                        "timestamp": { "$ref" : "file:json_ref/timestamp.json" },
                        "bases" :{
                            "$id": "#/properties/payload/properties/dps/bases",
                            "type": "array",
                            "description": "list of BS info",
                            "minItems": 1,
                            "maxItems": 13,
                            "items" : [
                                {
                                    "type" : "object",
                                    "required": [
                                        "fpn",
                                        "rpn",
                                        "rssi"
                                    ],
                                    "properties" : {
                                        "fpn": { "$ref" : "file:json_ref/fpn.json" },
                                        "rpn": { "$ref" : "file:json_ref/rpn.json" },
                                        "rssi": {"$ref" : "file:json_ref/rssi.json" }
                                    }
                                }
                            ]
                        }
                    }
                },
                "ble":  {
                    "$id": "#/properties/payload/properties/ble",
                    "type": "object",
                    "description": "BLE content response message",
                    "required": [
                        "status"
                    ],
                    "properties": {
                        "status": { "$ref" : "file:json_ref/status.json" }
                    }
                }
            }
        }
    }
}